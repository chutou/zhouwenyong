<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body>
    <div contentEditable="true" style="height:50px; border:2px solid red;"></div>  
    光标前的字符：<span id="selection"></span>  
    <script language="javascript">  
    <!--  
        var cursor = 0;// 光标位置  

        document.onselectionchange = function() {  
            var range = document.selection.createRange();  
            var srcele = range.parentElement();  
            var copy = document.body.createTextRange();  
            copy.moveToElementText(srcele);  

            for (cursor = 0; copy.compareEndPoints("StartToStart", range) < 0; cursor++) {  
                copy.moveStart("character", 1);  
            }  
            document.getElementById("selection").innerText = srcele.innerText.substring(cursor - 1, cursor);  
        }  
    //-->  
    </script>
</body>
</html>